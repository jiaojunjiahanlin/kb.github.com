---
layout: post
title: 七牛工作日志
---
####1,关于设置白名单403的问题详解
用户设置白名单没有允许空refer情况下，如果用户设置了点击跳转到新页面去查看，会出现403，但是有的浏览器不会报错。例如火狐。但是chrome浏览器是会报错的。

---

####2,关于微信下载apk，和下载图片的问题。
对于下载微信是可以请求道200，但是就是不给你显示，需要微信应用宝来验证。关于图片，私有资源图片也可以访问，但是有时间token。会造成一开始能访问，后台不行。关于图片不能打开，抓包显示请求也是ok的，但是微信不允许显示。这个肯定是微信做的限制。也可能是我碰到的那个客户将链接后面加了attname下载，微信当成apk下载来处理了。

---
####3,用户执行同步图片处理，同时执行异步图片处理，保存，处理不当会导致的情况
如果客户这样去执行，很可能会导致客户自己混乱，将不同的图片拿来做处理。

---
####4,关于七牛转码m3u8显示no domain found in 情况
可以通过直接绑定自定义域名来避免，也可以在这个命令上，avthuumb/m3u8/noDomain/1，其他参数接到后面就好了。

---
####5,关于用户处理https的plist下载中ipa软件在ios的下载问题
如果客户不能正常的下载安装，可能的原因在用户的plist生成有问题，首先要确保plist喝ipa都可下载。说明服务没有问题。

---
####5,关于在七牛上播放hls切片m3u8文件的私有资源在播放器插件中的播放问题
首先要对你的m3u8文件进行pm3u8接口处理，然后对文件生成私有链接，然后对除了域名部分其他的进行urlecode处理，放到播放器插件中处理。为什么urlencode是因为播放器插件不能识别&符号。会对此处截断处理。造成发送的视频url不完整。

---
####6,遇到下载不完整的情况解决方案。
首先确保本地网络环境良好，然后去七牛后台的选择文件所在空间，然后选择空间设置里面的高级设置，有个去刷新的按钮，然后将有问题的链接放到里面刷新下。就ok了。只要客户出现下载文件有问题，或者下载一半，或者下载的文件编码有问题，都可通过刷新来解决。导致这种情况一般是因为cdn缓存的问题，因为下载的时候有206请求，缓存了部分不完整的资源，导致下载不能正常完成导致。

---

---                     

| Tables        | Are           | Cool  |
| ------------- |:-------------:| -----:|
| col 3 is      | right-aligned | $1600 |
| col 2 is      | centered      |   $12 |
| zebra stripes | are neat      |    $1 |

Pellentesque adipiscing mollis adipiscing.

- Nulla sit amet nulla non odio sodales mollis elementum sed sem.
- Donec id tristique enim. Quisque tellus est, dignissim ut justo ac, volutpat fringilla mi.
- Nam luctus erat dolor, non viverra nulla varius at.

Curabitur nec ullamcorper dui, blandit aliquet ipsum. Integer suscipit odio quis eros fermentum auctor. Sed tincidunt quam eleifend, egestas erat vulputate, tincidunt metus. Maecenas gravida sodales mi nec posuere. Cras vel nisi condimentum, hendrerit lacus sed, scelerisque ipsum. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nunc convallis vestibulum erat, quis porta tellus. <em>In lorem erat, sollicitudin varius posuere id, molestie ac eros</em>. Fusce luctus tellus vitae vulputate venenatis. Sed scelerisque bibendum interdum. Sed pretium commodo ultrices. Fusce luctus quam id porttitor vulputate. Integer ornare consectetur diam eget rutrum. Etiam eget sapien metus.

<dl>
  <dt>Ornare</dt>
  <dd>Cras vel nisi condimentum, hendrerit lacus sed, scelerisque ipsum.</dd>
  <dt>Convallis</dt>
  <dd>In lorem erat, sollicitudin varius posuere id, molestie ac eros</dd>
</dl>

Proin at libero id lorem fermentum elementum quis eget est.

1. Nam bibendum turpis massa, at accumsan justo fermentum ac.
2. Nulla non nulla ut ante condimentum mattis vel at lectus.
3. Etiam eget tortor tincidunt, iaculis ligula a, tristique massa. Fusce sed congue lorem, interdum sodales nisl.

Etiam consequat euismod ornare. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Nulla pellentesque ipsum vulputate, pellentesque nisl vitae, lacinia sem. Praesent auctor felis et odio ultrices, nec tempor elit lobortis. Etiam ornare massa non risus luctus, id iaculis lacus egestas. Pellentesque massa dolor, mattis id lobortis eget, tristique vitae est.

---

Nam vulputate leo vitae libero vehicula, id tincidunt velit malesuada. In vel ornare nisi, id semper turpis. Vivamus erat elit, venenatis quis dui at, convallis suscipit sapien. Nunc in nisi scelerisque, aliquam mauris porttitor, facilisis ligula. Vestibulum cursus erat ac turpis bibendum, id pulvinar dolor dapibus. Proin vitae justo et velit imperdiet ultrices id id odio. Cras adipiscing ante vel mauris lobortis rutrum. Aenean eu felis est. In lacinia porttitor risus non sagittis.

<div class="highlight"><pre><span class="k">class</span> <span class="nc">Greeter</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
    <span class="vi">@message</span> <span class="o">=</span> <span class="n">message</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">greet</span>
    <span class="nb">puts</span> <span class="n">message</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">john</span> <span class="o">=</span> <span class="no">Greeter</span><span class="o">.</span><span class="n">new</span> <span class="s1">&#39;Hello, World&#39;</span>

<span class="n">john</span><span class="o">.</span><span class="n">greet</span>
</pre></div>

